/*
 constellation.js | http://constellationjs.com/license */
function h(a){throw a;}var k=!0,l=null,n=!1;function o(){return function(){}}function q(a){return function(){return this[a]}};Node=function(a,b){this.id=a;this.data=b?b:{};this.edges=[]};window.Node=Node;Node.prototype.xa=function(){for(var a=[],b=0;b<this.edges.length;b++)this.edges[b].tailNode.id==this.id?a.push(this.edges[b].headNode):a.push(this.edges[b].tailNode);return a};Node.prototype.getNeighborNodes=Node.prototype.xa;
Node.prototype.mb=function(){for(var a=[],b=0;b<this.edges.length;b++)this.edges[b].tailNode.id==this.id?a.push([this.edges[b],this.edges[b].headNode]):a.push([this.edges[b],this.edges[b].tailNode]);return a};Node.prototype.getNeighborEdgeNodePairs=Node.prototype.mb;Node.prototype.pa=function(){jQuery(this).trigger("dataChange")};Node.prototype.dataChanged=Node.prototype.pa;Edge=function(a,b,c,d){this.id=a;this.tailNode=b;this.headNode=c;this.data=d?d:{}};window.Edge=Edge;
Edge.prototype.nb=function(a){return a==this.tailNode.id?this.headNode:a==this.headNode.id?this.tailNode:l};Edge.prototype.getOtherNode=Edge.prototype.nb;Edge.prototype.pa=function(){jQuery(this).trigger("dataChange")};Edge.prototype.dataChanged=Edge.prototype.pa;Graph=function(){this.f=[];this.d=[]};window.Graph=Graph;Graph.prototype.F=function(a,b){this.j(a)&&h("Failed to add node. Node already exists.");var c=new Node(a,b);this.f.push(c);return c};Graph.prototype.addNode=Graph.prototype.F;
Graph.prototype.j=function(a){for(var b=0;b<this.f.length;b++)if(this.f[b].id==a)return this.f[b];return l};Graph.prototype.getNode=Graph.prototype.j;Graph.prototype.K=function(){return this.f.concat()};Graph.prototype.getNodes=Graph.prototype.K;Graph.prototype.X=function(){return this.f.map(function(a){return a.id})};Graph.prototype.getNodeIds=Graph.prototype.X;Graph.prototype.ya=function(){return this.f.length};Graph.prototype.getNodeLength=Graph.prototype.ya;
Graph.prototype.removeNode=function(a){for(var b=0;b<this.f.length;b++)if(this.f[b].id==a){this.f.splice(b,1);return}h("Failed to remove node. Node does not exist.")};Graph.prototype.removeNode=Graph.prototype.removeNode;Graph.prototype.Ha=function(a,b){var c=this.j(a);c?c.data=b:h("Failed to update node. Node does not exist.");return c};Graph.prototype.updateNode=Graph.prototype.Ha;
Graph.prototype.Ja=function(a,b,c,d){var c=2<arguments.length?c:n,d=3<arguments.length?d:n,e=this.j(a);e?e.data=c?jQuery.extend(d,e.data,b):b:e=this.F(a,b);return e};Graph.prototype.upsertNode=Graph.prototype.Ja;
Graph.prototype.D=function(a,b,c,d){this.q(a)&&h("Failed to add edge. Edge already exists.");(b=this.j(b))||h("Failed to add edge. Tail node does not exist.");(c=this.j(c))||h("Failed to add edge. Head node does not exist.");a=new Edge(a,b,c,d);this.d.push(a);b.edges.push(a);c.edges.push(a);return a};Graph.prototype.addEdge=Graph.prototype.D;Graph.prototype.q=function(a){for(var b=0;b<this.d.length;b++)if(this.d[b].id==a)return this.d[b];return l};Graph.prototype.getEdge=Graph.prototype.q;
Graph.prototype.W=function(){return this.d.map(function(a){return a.id})};Graph.prototype.getEdgeIds=Graph.prototype.W;Graph.prototype.ca=function(){return this.d.concat()};Graph.prototype.getEdges=Graph.prototype.ca;Graph.prototype.wa=function(){return this.d.length};Graph.prototype.getEdgeLength=Graph.prototype.wa;
Graph.prototype.Z=function(a){var b,c=l;for(b=0;b<this.d.length;b++)if(this.d[b].id==a){c=this.d[b];this.d.splice(b,1);break}if(c){for(b=0;b<c.tailNode.edges.length;b++)if(c.tailNode.edges[b].id==a){c.tailNode.edges.splice(b,1);break}for(b=0;b<c.headNode.edges.length;b++)if(c.headNode.edges[b].id==a){c.headNode.edges.splice(b,1);break}}else h("Failed to remove edge. Edge does not exist.")};Graph.prototype.removeEdge=Graph.prototype.Z;
Graph.prototype.Ga=function(a,b){var c=this.q(a);c?c.data=b:h("Failed to update edge. Edge does not exist.");return c};Graph.prototype.updateEdge=Graph.prototype.Ga;Graph.prototype.Ia=function(a,b,c,d,e,f){var e=4<arguments.length?e:n,f=5<arguments.length?f:n,g=this.q(a);g?g.data=e?jQuery.extend(f,g.data,d):d:g=this.D(a,b,c,d);return g};Graph.prototype.upsertEdge=Graph.prototype.Ia;GraphLoader=function(a){0>=arguments.length||(this.config=a,this.parser=this.constellation=l)};window.GraphLoader=GraphLoader;GraphLoader.prototype.V=q("constellation");GraphLoader.prototype.getConstellation=GraphLoader.prototype.V;GraphLoader.prototype.h=function(a){this.constellation=a};GraphLoader.prototype.setConstellation=GraphLoader.prototype.h;GraphLoader.prototype.ob=q("parser");GraphLoader.prototype.getParser=GraphLoader.prototype.ob;GraphLoader.prototype.vb=function(a){this.parser=a};
GraphLoader.prototype.setParser=GraphLoader.prototype.vb;SimpleGraphLoader=function(a){0>=arguments.length||GraphLoader.call(this,a)};window.SimpleGraphLoader=SimpleGraphLoader;SimpleGraphLoader.prototype=new GraphLoader;SimpleGraphLoader.prototype.h=function(a){this.constellation&&jQuery(this.constellation).unbind("initialized");GraphLoader.prototype.h.call(this,a);this.constellation&&jQuery(this.constellation).bind("initialized",{context:this},function(a){a=a.data.context;a.config.url&&a.load(a.config.url)})};
SimpleGraphLoader.prototype.setConstellation=SimpleGraphLoader.prototype.h;SimpleGraphLoader.prototype.load=function(a){this.parser||h("Graph loading halted. No parser has been set.");jQuery.ajax({url:a,context:this,success:function(a){this.parser.parse(a)}})};SimpleGraphLoader.prototype.load=SimpleGraphLoader.prototype.load;TreeGraphLoader=function(a){0>=arguments.length||GraphLoader.call(this,a)};window.TreeGraphLoader=TreeGraphLoader;TreeGraphLoader.prototype=new GraphLoader;
TreeGraphLoader.prototype.h=function(a){GraphLoader.prototype.h.call(this,a);jQuery(this.constellation).bind("nodeSelected",o())};GraphParser=function(a){0>=arguments.length||(this.config=a,this.graph=l)};window.GraphParser=GraphParser;GraphParser.prototype.gb=q("graph");GraphParser.prototype.getGraph=GraphParser.prototype.gb;GraphParser.prototype.ub=function(a){this.graph=a};GraphParser.prototype.setGraph=GraphParser.prototype.ub;GraphParser.prototype.parse=o();GraphParser.prototype.parse=GraphParser.prototype.parse;RoamerGraphParser=function(a){0>=arguments.length||GraphParser.call(this,a)};window.RoamerGraphParser=RoamerGraphParser;
RoamerGraphParser.prototype=new GraphParser;RoamerGraphParser.prototype.parse=function(a){a instanceof jQuery||(a=jQuery(a));var b=this.graph;a.find("node").each(function(a,d){var d=jQuery(d),e={};jQuery.each(this.attributes,function(a,b){e[b.name]=b.value});b.F(d.attr("id"),e)});a.find("edge").each(function(a,d){var d=jQuery(d),e={};jQuery.each(this.attributes,function(a,b){e[b.name]=b.value});b.D(d.attr("id"),d.attr("tail_node_id"),d.attr("head_node_id"),e)});jQuery(this).trigger("complete")};
RoamerGraphParser.prototype.parse=RoamerGraphParser.prototype.parse;GraphMlParser=function(a){0>=arguments.length||GraphParser.call(this,a)};window.GraphMlParser=GraphMlParser;GraphMlParser.prototype=new GraphParser;
GraphMlParser.prototype.parse=function(a){a instanceof jQuery||(a=jQuery(a));var b=this.graph,c={};a.find('key[for="node"]').each(function(a,b){b=jQuery(b);c[b.attr("id")]=b});var d={};a.find('key[for="edge"]').each(function(a,b){b=jQuery(b);d[b.attr("id")]=b});a.find("node").each(function(a,d){var d=jQuery(d),g={},i;for(i in c){var j=c[i].attr("attr.name").replace(/[^a-zA-Z0-9]/g,"_"),m=d.find('data[key="'+i+'"]');0<m.length&&(g[j]=m.text())}b.F(d.attr("id"),g)});a.find("edge").each(function(a,c){var c=
jQuery(c),g={},i;for(i in d){var j=d[i].attr("attr.name").replace(/[^a-zA-Z0-9]/g,"_"),m=c.find('data[key="'+i+'"]');0<m.length&&(g[j]=m.text())}b.D(c.attr("source")+":"+c.attr("target"),c.attr("source"),c.attr("target"),g)});jQuery(this).trigger("complete")};GraphMlParser.prototype.parse=GraphMlParser.prototype.parse;GraphView=function(a){0>=arguments.length||(this.config=a,this.result=this.source=this.constellation=l,this.Ka=k)};window.GraphView=GraphView;GraphView.prototype.V=q("constellation");GraphView.prototype.getConstellation=GraphView.prototype.V;GraphView.prototype.h=function(a){this.constellation=a;this.L()};GraphView.prototype.setConstellation=GraphView.prototype.h;GraphView.prototype.rb=q("source");GraphView.prototype.getSource=GraphView.prototype.rb;
GraphView.prototype.zb=function(a){this.source=a;this.L()};GraphView.prototype.setSource=GraphView.prototype.zb;GraphView.prototype.ab=function(){this.L()};GraphView.prototype.sourceChanged=GraphView.prototype.ab;GraphView.prototype.pb=q("result");GraphView.prototype.getResult=GraphView.prototype.pb;GraphView.prototype.wb=function(a){this.result=a;this.L()};GraphView.prototype.setResult=GraphView.prototype.wb;
GraphView.prototype.L=function(){if(this.Ka){this.Ka=n;var a=this;window.setTimeout(function(){var b=a.validate();a.Ka=k;b&&jQuery(a).trigger("change")},50)}};GraphView.prototype.invalidate=GraphView.prototype.L;GraphView.prototype.aa=function(){return n};GraphView.prototype.validate=GraphView.prototype.aa;DirectGraphView=function(a){0>=arguments.length||GraphView.call(this,a)};window.DirectGraphView=DirectGraphView;DirectGraphView.prototype=new GraphView;
DirectGraphView.prototype.aa=function(){var a,b=this.result.X(),c=this.result.W(),d=this.source.K(),e=this.source.ca();for(a=0;a<e.length;a++)index=c.indexOf(e[a].id),0<=index&&(edge=this.result.q(e[a].id),edge.data=e[a].data,c.splice(index,1),e.splice(a,1),a--);for(a=0;a<d.length;a++)index=b.indexOf(d[a].id),0<=index&&(node=this.result.j(d[a].id),node.data=d[a].data,b.splice(index,1),d.splice(a,1),a--);for(a=0;a<c.length;a++)this.result.Z(c[a]);for(a=0;a<b.length;a++)this.result.removeNode(b[a]);
for(a=0;a<d.length;a++)b=d[a],this.result.F(b.id,b.data);for(a=0;a<e.length;a++)d=e[a],this.result.D(d.id,d.tailNode.id,d.headNode.id,d.data);return k};DirectGraphView.prototype.validate=DirectGraphView.prototype.aa;TreeGraphView=function(a){0>=arguments.length||(GraphView.call(this,a),this.H=l,this.Ea=n,this.ba=1)};window.TreeGraphView=TreeGraphView;TreeGraphView.prototype=new GraphView;
TreeGraphView.prototype.h=function(a){this.constellation&&jQuery(this.constellation).unbind("nodeSelected");GraphView.prototype.h.call(this,a);this.constellation&&jQuery(this.constellation).bind("nodeSelected",{context:this},function(a){a.data.context.Va()})};TreeGraphView.prototype.setConstellation=TreeGraphView.prototype.h;TreeGraphView.prototype.Va=function(){this.Ea=k;this.H=this.constellation.Pa();this.L()};TreeGraphView.prototype.selectedNodeHandler=TreeGraphView.prototype.Va;
TreeGraphView.prototype.aa=function(){var a,b;this.Ea&&(this.ba=2);if(a=this.source.j(this.H)){a.depth=0;var c=this.result.X(),d=this.result.W(),e=[a],f=[];b={};var g=[a];for(b[this.H]={Q:this.ba,fa:0};0<g.length;){var i=g.shift(),j=b[i.id];if(0<j.Q){var m=i.edges;for(a=0;a<m.length;a++){var p=m[a],s;s=p.tailNode.id==i.id?p.headNode:p.tailNode;var r=b[s.id];if((!r||r.Q<j.Q-1)&&1<j.Q)r=j.Q-1,s.depth=j.fa+1,e.push(s),g.push(s),r={Q:r,fa:j.fa+1},b[s.id]=r;0>jQuery.inArray(p,f)&&r&&(p.depth=j.fa,f.push(p))}}}for(a=
0;a<f.length;a++)b=d.indexOf(f[a].id),0<=b&&(p=this.result.q(f[a].id),p.data=f[a].data,d.splice(b,1),f.splice(a,1),a--);for(a=0;a<e.length;a++)b=c.indexOf(e[a].id),0<=b&&(node=this.result.j(e[a].id),node.data=e[a].data,c.splice(b,1),e.splice(a,1),a--);for(a=0;a<d.length;a++)b=d[a],jQuery(this.source.j(b)).unbind("dataChange",this.Ab),this.result.Z(b);for(a=0;a<c.length;a++)d=c[a],jQuery(this.source.j(d)).unbind("dataChange",this.Eb),this.result.removeNode(d);for(a=0;a<e.length;a++)c=e[a],d=this.result.F(c.id,
jQuery.extend({},c.data)),jQuery(c).bind("dataChange",{context:this,result:d},this.Ma);for(a=0;a<f.length;a++)e=f[a],c=this.result.D(e.id,e.tailNode.id,e.headNode.id,jQuery.extend({},e.data)),jQuery(e).bind("dataChange",{context:this,result:c},this.Ma);this.Ea=n;if(3>this.ba){clearTimeout(this.sb);var t=this;this.sb=setTimeout(function(){t.ba++;t.L()},1E3)}return k}};TreeGraphView.prototype.validate=TreeGraphView.prototype.aa;
TreeGraphView.prototype.Ma=function(a){a.data.result.data=a.target.data;a.data.result.m()};Layout=function(a){0>=arguments.length||(this.config=a)};window.Layout=Layout;Layout.prototype.V=q("constellation");Layout.prototype.getConstellation=Layout.prototype.V;Layout.prototype.h=function(a){this.constellation=a};Layout.prototype.setConstellation=Layout.prototype.h;Layout.prototype.I=function(){for(var a=this.constellation.K(),b=0;b<a.length;b++){var c=a[b];if(c.x==l||c.y==l)c.x=10*Math.floor((100*Math.random()-50)/10),c.y=10*Math.floor((100*Math.random()-50)/10)}jQuery(this).trigger("change")};
Layout.prototype.viewChanged=Layout.prototype.I;StaticLayout=function(a){0>=arguments.length||(Layout.call(this,a),this.u=l)};window.StaticLayout=StaticLayout;StaticLayout.prototype=new Layout;StaticLayout.prototype.h=function(a){this.constellation&&jQuery(this.constellation).unbind("nodemousedown").unbind("mouseup");Layout.prototype.h.call(this,a);this.constellation&&jQuery(this.constellation).bind("nodemousedown",{context:this},function(a){a.data.context.O(a)}).bind("mouseup",{context:this},function(a){a.data.context.Da(a)})};
StaticLayout.prototype.setConstellation=StaticLayout.prototype.h;StaticLayout.prototype.I=function(){for(var a=this.constellation.K(),b=0;b<a.length;b++){var c=a[b];if(c.x==l||c.y==l)c.x=c.data.x?c.data.x:(Math.random()-0.5)*this.constellation.U,c.y=c.data.y?c.data.y:(Math.random()-0.5)*this.constellation.R}jQuery(this).trigger("change")};StaticLayout.prototype.viewChanged=StaticLayout.prototype.I;StaticLayout.prototype.O=function(){this.step()};StaticLayout.prototype.Da=function(){this.u&&clearInterval(this.u)};
StaticLayout.prototype.step=function(){for(var a in this.constellation.k){var b=this.constellation.k[a];if(b.M){var c=b.i,d=b.M,e=this.constellation.z(c.pageX)-b.ga,b=this.constellation.A(0,c.pageY)-b.ha;d.x=this.constellation.S(e,b);d.y=this.constellation.T(e,b)}}jQuery(this).trigger("change");this.u&&clearTimeout(this.u);this.u=setTimeout(function(a){return function(){a.step()}}(this),40)};RoamerLayout=function(a){0>=arguments.length||(Layout.call(this,a),this.u=l,this.Fa=[])};
window.RoamerLayout=RoamerLayout;RoamerLayout.prototype=new Layout;RoamerLayout.prototype.h=function(a){this.constellation&&(jQuery(this.constellation).unbind("nodeAdded"),this.u&&clearTimeout(this.u));Layout.prototype.h.call(this,a);this.constellation&&(jQuery(this.constellation).bind("nodeAdded",{context:this},function(a,c){a.data.context.Fa.push(c)}),this.step())};RoamerLayout.prototype.setConstellation=RoamerLayout.prototype.h;RoamerLayout.prototype.I=o();RoamerLayout.prototype.viewChanged=RoamerLayout.prototype.I;
RoamerLayout.prototype.step=function(){for(;0<this.Fa.length;)u(this,this.Fa.shift());for(var a=this.constellation.Oa(),b=-0.1*(a.x+a.width/2),a=-0.1*(a.y+a.height/2),c=this.constellation.K(),d=0;d<c.length;d++)for(var e=c[d],f=d+1;f<c.length;f++){var g=c[f],i=g.x-e.x,j=g.y-e.y;0==i&&0==j&&(i=0.5*Math.random(),j=0.5*Math.random());for(var m=Math.sqrt(i*i+j*j),p=i-100*(i/m),s=j-100*(j/m),i=j=0,r=n,t=0;t<e.edges.length;t++){var x=e.edges[t];if(x.tailNode.id==g.id||x.headNode.id==g.id)r=k}r&&100<m?(j=
0.2*p,i=0.2*s):100>m&&(j=0.2*p,i=0.2*s);m=1;p=e.edges.length;0<p&&(m=1/Math.pow(p,1/3));e.ax+=j*m;e.ay+=i*m;m=1;p=g.edges.length;0<p&&(m=1/Math.pow(p,1/3));g.ax-=j*m;g.ay-=i*m}for(d=0;d<c.length;d++)e=c[d],f=Math.sqrt(e.ax*e.ax+e.ay*e.ay),15<f&&(e.ax=15*(e.ax/f),e.ay=15*(e.ay/f)),e.ax-=0.3*e.vx,e.ay-=0.3*e.vy,e.vx+=e.ax,e.vy+=e.ay,e.x+=e.vx+b,e.y+=e.vy+a,e.ax=0,e.ay=0;for(var A in this.constellation.k)c=this.constellation.k[A],c.M&&(d=c.i,b=c.M,a=this.constellation.z(d.pageX)-c.ga,c=this.constellation.A(0,
d.pageY)-c.ha,b.x=this.constellation.S(a,c),b.y=this.constellation.T(a,c));jQuery(this).trigger("change");this.u&&clearTimeout(this.u);this.u=setTimeout(function(a){return function(){a.step()}}(this),40)};function u(a,b){var c=0,d=0,e=b.xa().filter(a.Na),f=v(e);1<e.length?(c=f.x,d=f.y):0<e.length&&(d=e[0],c=d.xa().filter(a.Na),0<c.length?(c=v(c),e={x:d.x-c.x,y:d.y-c.y},f=Math.sqrt(e.x*e.x+e.y*e.y),c=d.x+50*e.x/f,d=d.y+50*e.y/f):(c=d.x,d=d.y));b.x=c+Math.random()-0.5;b.y=d+Math.random()-0.5}
RoamerLayout.prototype.Na=function(a){return a.x!=l||a.y!=l};function v(a){if(0>=a.length)return l;for(var b=0,c=0,d=0;d<a.length;d++)var e=a[d],b=b+e.x,c=c+e.y;return{x:b/a.length,y:c/a.length}};NodeRenderer=function(a,b,c){this.constellation=a;Node.call(this,b,c);this.data.classes||(this.data.classes=[]);this.y=this.x=l;this.ay=this.ax=this.vy=this.vx=0};window.NodeRenderer=NodeRenderer;NodeRenderer.prototype=new Node;NodeRenderer.prototype.v={};NodeRenderer.prototype.e=function(a){return this.constellation.e("node",this.data.classes,a,this.data,this.v)};NodeRenderer.prototype.getStyle=NodeRenderer.prototype.e;
NodeRenderer.prototype.addClass=function(a){0>jQuery.inArray(a,this.data.classes)&&this.data.classes.push(a)};NodeRenderer.prototype.addClass=NodeRenderer.prototype.addClass;NodeRenderer.prototype.hasClass=function(a){return 0<=jQuery.inArray(a,this.data.classes)};NodeRenderer.prototype.hasClass=NodeRenderer.prototype.hasClass;NodeRenderer.prototype.removeClass=function(a){for(var b;0<=(b=jQuery.inArray(a,this.data.classes));)this.data.classes.splice(b,1)};NodeRenderer.prototype.removeClass=NodeRenderer.prototype.removeClass;
NodeRenderer.prototype.create=o();NodeRenderer.prototype.create=NodeRenderer.prototype.create;NodeRenderer.prototype.m=o();NodeRenderer.prototype.draw=NodeRenderer.prototype.m;NodeRenderer.prototype.position=o();NodeRenderer.prototype.position=NodeRenderer.prototype.position;NodeRenderer.prototype.o=o();NodeRenderer.prototype.destroy=NodeRenderer.prototype.o;DefaultNodeRenderer=function(a,b,c){NodeRenderer.call(this,a,b,c)};window.DefaultNodeRenderer=DefaultNodeRenderer;
DefaultNodeRenderer.prototype=new NodeRenderer;DefaultNodeRenderer.prototype.v={};
DefaultNodeRenderer.prototype.create=function(){var a=this.constellation.svg,b=a.group(this.constellation.da(),{display:"none"});this.a={group:b,w:a.circle(b,0,0,30,{fill:"#ffffff",stroke:"#666666",strokeWidth:1}),Ba:a.rect(b,0,0,0,0,2,2,{fill:"#ffffcc",stroke:"#333333",strokeWidth:1}),label:a.text(b,0,0,this.data.label,{style:"-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none;",fontFamily:"Verdana",fontSize:15,fontWeight:"bold",fill:"#441111",
textAnchor:"middle",dy:".35em"})};jQuery(this.a.group).bind("mouseover",{context:this},function(a){a.data.context.constellation.ka(0,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.ja(0,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.O(a,a.data.context)}).bind("mouseup",{context:this},function(a){a.data.context.constellation.la(0,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.ia(0,
a.data.context)})};DefaultNodeRenderer.prototype.create=DefaultNodeRenderer.prototype.create;DefaultNodeRenderer.prototype.m=function(){var a=this.a.label.getBBox(),b=jQuery(this.a.Ba);0<a.width&&0<a.height?(b.css("display","inline"),b.attr("x",a.x-8),b.attr("y",a.y-3),b.attr("width",a.width+16),b.attr("height",a.height+6)):b.css("display","none");this.position();jQuery(this.a.group).css("display","inline")};DefaultNodeRenderer.prototype.draw=DefaultNodeRenderer.prototype.m;
DefaultNodeRenderer.prototype.position=function(){jQuery(this.a.group).attr("transform","translate("+this.x+","+this.y+")")};DefaultNodeRenderer.prototype.position=DefaultNodeRenderer.prototype.position;DefaultNodeRenderer.prototype.o=function(){jQuery(this.a.group).remove();this.a=l};DefaultNodeRenderer.prototype.destroy=DefaultNodeRenderer.prototype.o;RoamerNodeRenderer=function(a,b,c){NodeRenderer.call(this,a,b,c);this.Ra=this.Qa=this.label=l};window.RoamerNodeRenderer=RoamerNodeRenderer;
RoamerNodeRenderer.prototype=new NodeRenderer;
RoamerNodeRenderer.prototype.v={label:"",tooltip:"",url:"",url_target:"_self",graphic_type:"shape",graphic_image_url:"",graphic_shape:"circle",graphic_fill_color:"#ffffff",graphic_line_color:"#000000",graphic_gradient_fill:k,graphic_size:40,selected_graphic_shape:"circle",selected_graphic_fill_color:"#ffffff",selected_graphic_line_color:"#000000",selected_graphic_gradient_fill:k,selected_graphic_size:40,left_icon_url:"",right_icon_url:"",selected_left_icon_url:"",selected_right_icon_url:"",left_icon_spacing:0,
right_icon_spacing:0,label_bg_enabled:k,label_bg_fill_color:"#ffffff",label_bg_line_color:"#000000",label_bg_rounded_corners:k,selected_label_bg_enabled:k,selected_label_bg_fill_color:"#ffffff",selected_label_bg_line_color:"#000000",selected_label_bg_rounded_corners:k,label_position:"center",label_embed_fonts:k,label_font_color:"#000000",label_font_bold:n,label_font_family:"Arial",label_font_italic:n,label_font_size:12,selected_label_font_color:"#000000",selected_label_font_bold:k,selected_label_font_family:"Arial",
selected_label_font_italic:n,selected_label_font_size:12};
RoamerNodeRenderer.prototype.create=function(){var a=this.constellation.svg,b=a.group(this.constellation.da(),{display:"none"});this.a={group:b,za:a.group(b),w:l,Ba:a.rect(b,0,0,0,0,2,2,{fill:"#ffffcc",stroke:"#333333",strokeWidth:1}),label:a.text(b,0,0,"",{style:"-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none;",fontFamily:"Verdana",fontSize:15,fontWeight:"bold",fill:"#441111",textAnchor:"middle",dy:".35em"})};jQuery(this.a.group).bind("mouseover",
{context:this},function(a){a.data.context.constellation.ka(0,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.ja(0,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.O(a,a.data.context)}).bind("mouseup",{context:this},function(a){a.data.context.constellation.la(0,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.ia(0,a.data.context)})};RoamerNodeRenderer.prototype.create=RoamerNodeRenderer.prototype.create;
RoamerNodeRenderer.prototype.m=function(){var a=this.constellation.svg;jQuery(this.a.group).css("display","inline");var b={fill:this.e("graphic_fill_color"),stroke:this.e("graphic_line_color")},c=this.e("label"),d=this.e("graphic_size"),e=this.e("graphic_shape");if(this.Qa!=e)switch(this.a.w&&(jQuery(this.a.w).remove(),this.a.w=l),e){case "pentagon":break;case "square":this.a.w=a.rect(this.a.za,-d/2,-d/2,d,d,b);break;case "diamond":break;case "triangle":break;case "circle":this.a.w=a.circle(this.a.za,
0,0,d/2,b);break;default:h("Failed to draw node graphic. Unknown shape. shape='"+e+"'")}else{if(this.Ra!=d)switch(e){case "pentagon":break;case "square":b.x=-d/2;b.y=-d/2;b.width=d;b.height=d;break;case "diamond":break;case "triangle":break;case "circle":b.r=d/2;break;default:h("Failed to draw node graphic. Unknown shape. shape='"+e+"'")}a.change(this.a.w,b)}this.label!=c&&jQuery(this.a.label).contents().remove().end().append(c);a=this.a.label.getBBox();b=jQuery(this.a.Ba);0<a.width&&0<a.height?(b.css("display",
"inline"),b.attr("x",a.x-8),b.attr("y",a.y-3),b.attr("width",a.width+16),b.attr("height",a.height+6)):b.css("display","none");this.position();this.label=c;this.Ra=d;this.Qa=e};RoamerNodeRenderer.prototype.draw=RoamerNodeRenderer.prototype.m;RoamerNodeRenderer.prototype.position=function(){jQuery(this.a.group).attr("transform","translate("+this.x+","+this.y+")")};RoamerNodeRenderer.prototype.position=RoamerNodeRenderer.prototype.position;
RoamerNodeRenderer.prototype.o=function(){jQuery(this.a.group).remove();this.a=l};RoamerNodeRenderer.prototype.destroy=RoamerNodeRenderer.prototype.o;GephiNodeRenderer=function(a,b,c){NodeRenderer.call(this,a,b,c);this.label="";this.size=0};window.GephiNodeRenderer=GephiNodeRenderer;GephiNodeRenderer.prototype=new NodeRenderer;GephiNodeRenderer.prototype.v={label:"",r:255,g:255,b:255,size:5};
GephiNodeRenderer.prototype.create=function(){var a=this.constellation.svg,b=a.group(this.constellation.da(),{display:"none"}),c=a.group(b);this.a={group:b,za:c,w:a.circle(c,0,0,this.size/2,{strokeWidth:3}),label:a.text(b,0,0,"",{style:"-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none;",fontFamily:"Verdana",fontSize:12,fontWeight:"normal",fill:"#333333",textAnchor:"left",dy:".35em"})};jQuery(this.a.group).bind("mouseover",{context:this},
function(a){a.data.context.constellation.ka(0,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.ja(0,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.O(a,a.data.context)}).bind("mouseup",{context:this},function(a){a.data.context.constellation.la(0,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.ia(0,a.data.context)})};GephiNodeRenderer.prototype.create=GephiNodeRenderer.prototype.create;
GephiNodeRenderer.prototype.m=function(){var a=this.constellation.svg;jQuery(this.a.group).css("display","inline");var b={fill:"#"+(this.e("b")|this.e("g")<<8|this.e("r")<<16).toString(16),stroke:"#333333"},c=this.e("label"),d=this.e("size");this.size!=d?(b.r=d/2,a.change(this.a.w,b),a.change(this.a.label,{x:d/2+10})):a.change(this.a.w,b);this.label!=c&&jQuery(this.a.label).contents().remove().end().append(c);this.position();this.label=c;this.size=d};GephiNodeRenderer.prototype.draw=GephiNodeRenderer.prototype.m;
GephiNodeRenderer.prototype.position=function(){jQuery(this.a.group).attr("transform","translate("+this.x+","+this.y+")")};GephiNodeRenderer.prototype.position=GephiNodeRenderer.prototype.position;GephiNodeRenderer.prototype.o=function(){jQuery(this.a.group).remove();this.a=l};GephiNodeRenderer.prototype.destroy=GephiNodeRenderer.prototype.o;EdgeRenderer=function(a,b,c,d,e){this.constellation=a;Edge.call(this,b,c,d,e);this.data.classes||(this.data.classes=[])};window.EdgeRenderer=EdgeRenderer;
EdgeRenderer.prototype=new Edge;EdgeRenderer.prototype.v={};EdgeRenderer.prototype.e=function(a){return this.constellation.e("edge",this.data.classes,a,this.data,this.v)};EdgeRenderer.prototype.getStyle=EdgeRenderer.prototype.e;EdgeRenderer.prototype.addClass=function(a){0>jQuery.inArray(a,this.data.classes)&&this.data.classes.push(a)};EdgeRenderer.prototype.addClass=EdgeRenderer.prototype.addClass;EdgeRenderer.prototype.hasClass=function(a){return 0<=jQuery.inArray(a,this.data.classes)};
EdgeRenderer.prototype.hasClass=EdgeRenderer.prototype.hasClass;EdgeRenderer.prototype.removeClass=function(a){for(var b;0<=(b=jQuery.inArray(a,this.data.classes));)this.data.classes.splice(b,1)};EdgeRenderer.prototype.removeClass=EdgeRenderer.prototype.removeClass;EdgeRenderer.prototype.create=o();EdgeRenderer.prototype.create=EdgeRenderer.prototype.create;EdgeRenderer.prototype.m=o();EdgeRenderer.prototype.draw=EdgeRenderer.prototype.m;EdgeRenderer.prototype.o=o();
EdgeRenderer.prototype.destroy=EdgeRenderer.prototype.o;DefaultEdgeRenderer=function(a,b,c,d,e){EdgeRenderer.call(this,a,b,c,d,e)};window.DefaultEdgeRenderer=DefaultEdgeRenderer;DefaultEdgeRenderer.prototype=new EdgeRenderer;DefaultEdgeRenderer.prototype.v={};
DefaultEdgeRenderer.prototype.create=function(){this.a={line:this.constellation.svg.line(this.constellation.va(),0,0,10,0,{display:"none",stroke:"#999999",strokeWidth:5})};jQuery(this.a.line).bind("mouseover",{context:this},function(a){a.data.context.constellation.ta(0,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.sa(0,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.ra(a,a.data.context)}).bind("mouseup",{context:this},
function(a){a.data.context.constellation.ua(0,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.qa(0,a.data.context)})};DefaultEdgeRenderer.prototype.create=DefaultEdgeRenderer.prototype.create;DefaultEdgeRenderer.prototype.m=function(){jQuery(this.a.line).attr("x1",this.tailNode.x).attr("y1",this.tailNode.y).attr("x2",this.headNode.x).attr("y2",this.headNode.y).css("display","inline")};DefaultEdgeRenderer.prototype.draw=DefaultEdgeRenderer.prototype.m;
DefaultEdgeRenderer.prototype.o=function(){jQuery(this.a.line).remove()};DefaultEdgeRenderer.prototype.destroy=DefaultEdgeRenderer.prototype.o;RoamerEdgeRenderer=function(a,b,c,d,e){EdgeRenderer.call(this,a,b,c,d,e)};window.RoamerEdgeRenderer=RoamerEdgeRenderer;RoamerEdgeRenderer.prototype=new EdgeRenderer;RoamerEdgeRenderer.prototype.v={tooltip:"",edge_line_color:"#000000",edge_line_thickness:1,arrowhead:k,bidirectional:n,reverse:n,edge_length_weight:0};
RoamerEdgeRenderer.prototype.create=function(){this.a={line:this.constellation.svg.line(this.constellation.va(),0,0,10,0,{display:"none",stroke:this.e("edge_line_color"),strokeWidth:this.e("edge_line_thickness")})};jQuery(this.a.line).bind("mouseover",{context:this},function(a){a.data.context.constellation.ta(0,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.sa(0,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.ra(a,
a.data.context)}).bind("mouseup",{context:this},function(a){a.data.context.constellation.ua(0,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.qa(0,a.data.context)})};RoamerEdgeRenderer.prototype.create=RoamerEdgeRenderer.prototype.create;
RoamerEdgeRenderer.prototype.m=function(){jQuery(this.a.line).attr("x1",this.tailNode.x).attr("y1",this.tailNode.y).attr("x2",this.headNode.x).attr("y2",this.headNode.y).css("stroke",this.e("edge_line_color")).css("strokeWidth",this.e("edge_line_thickness")).css("display","inline")};RoamerEdgeRenderer.prototype.draw=RoamerEdgeRenderer.prototype.m;RoamerEdgeRenderer.prototype.o=function(){jQuery(this.a.line).remove()};RoamerEdgeRenderer.prototype.destroy=RoamerEdgeRenderer.prototype.o;Constellation=function(a,b){this.config=jQuery.extend(k,this.bb,a);this.ma=b?b:this.v;this.f=[];this.d=[];this.svg=l;this.C=this.B=this.R=this.U=0;this.l=1;this.rotation=0;this.k={};this.$=this.H=this.p=this.c=l};window.Constellation=Constellation;Constellation.Db={};
Constellation.prototype.tb=function(){this.debug("Initializing Constellation.");document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||h("Failed to initialize Constellation. SVG not supported.");var a=jQuery("#"+this.config.id);0>=a.length&&h("Failed to initialize Constellation. Container does not exist.");a.html('<div style="position:relative;width:100%;height:100%"><div class="container" style="overflow:hidden;position:absolute;width:100%;height:100%;z-index:2"></div><div class="background" style="position:absolute;width:100%;height:100%;z-index:1"></div></div>');
this.J=a.find("div.container");this.J.svg({onLoad:function(a){return function(c){a.svg=c;a.debug("SVG initialized");w(a);a.La=a.svg.group();a.eb=a.svg.group(a.La);a.Ua=a.svg.group(a.La);y(a)}}(this)});this.Sa();this.$a(new Graph);this.Wa(new this.config.graphLoaderClass(this.config.graphLoader));this.Xa(new this.config.graphParserClass(this.config.graphParser));this.Ya(new this.config.graphViewClass(this.config.graphView));this.Za(new this.config.layoutClass(this.config.layout));"createTouch"in document?
jQuery(this.canvas).bind("touchstart",{context:this},function(a){var c=a.data.context;a.preventDefault();for(var d=0;d<a.N.changedTouches.length;d++){var e=a.N.changedTouches[d],f=c.k["_"+e.identifier]={Aa:k,i:e,timestamp:(new Date).getTime()},g=c.z(e.pageX),i=c.A(0,e.pageY),j=c.Cb(g,i);j?(f.M=j,f.ga=g-j.Fb,f.ha=i-j.Gb,jQuery(c).trigger("nodetouchstart")):(g=c.Bb(g,i))?(f.cb=g,jQuery(c).trigger("edgetouchstart")):(g=c.z(e.pageX),e=c.A(0,e.pageY),f.x=c.S(g,e),f.y=c.T(g,e),c.c?c.p||(c.p=f):c.c=f,jQuery(c).trigger("backgroundtouchstart"))}}).bind("touchmove",
{context:this},function(a){var c=a.data.context;a.preventDefault();z(c);jQuery(c).trigger("touchmove")}).bind("touchend",{context:this},function(a){var c=a.data.context;a.preventDefault();z(c);for(var d=0;d<a.N.changedTouches.length;d++)var e=a.N.changedTouches[d],f=c.k["_"+e.identifier];for(d=0;d<a.N.changedTouches.length;d++)e=a.N.changedTouches[d],f=c.k["_"+e.identifier],delete c.k["_"+e.identifier],c.c==f&&(c.c=c.p,c.p=l,c.c&&(c.c.pageX=c.c.i.pageX,c.c.pageY=c.c.i.pageY,c.c.B=c.B,c.c.C=c.C,c.c.l=
c.l)),c.p==f&&(c.p=l,c.c&&(c.c.pageX=c.c.i.pageX,c.c.pageY=c.c.i.pageY,c.c.B=c.B,c.c.C=c.C,c.c.l=c.l));jQuery(c).trigger("touchend")}).bind("touchcancel",{context:this},function(a){var c=a.data.context;a.preventDefault();for(var d=0;d<a.N.changedTouches.length;d++)delete c.k["_"+a.N.changedTouches[d].identifier];jQuery(c).trigger("touchcancel")}):(jQuery(document).mousemove({context:this},function(a){var c=a.data.context,d=c.k._mouse;d&&(d.i=a);z(c)}).mouseup({context:this},function(a){a.data.context.Da(a)}),
this.J.find("svg").mousedown({context:this},function(a){var c=a.data.context;if(a.target==a.currentTarget){var d=c.k._mouse={Aa:n,i:a,timestamp:(new Date).getTime()},e=c.z(a.pageX),a=c.A(0,a.pageY);d.x=c.S(e,a);d.y=c.T(e,a);c.c?c.p||(c.p=d):c.c=d;jQuery(c).trigger("backgroundmousedown")}}).click({context:this},o()),jQuery(this.canvas).mousewheel({context:this},function(a,c){var d=a.data.context;a.preventDefault();d.P(d.ea()+0.1*c);jQuery(d).trigger("mousewheel")}));w(this);jQuery(this).trigger("initialized")};
Constellation.prototype.init=Constellation.prototype.tb;
Constellation.prototype.Sa=function(){this.J.append('<div class="zoomControls"><button class="zoomInButton">Zoom in</button><div class="zoomSlider"></div><button class="zoomOutButton">Zoom out</button></div>');var a=this.config.id;jQuery("head").append('<style type="text/css">#'+a+" .zoomControls { position: absolute; right: 20px; top: 20px; width: 20px; z-index: 1 } #"+a+" .zoomControls .ui-button { height: 20px; margin: 1px 0; width: 20px } #"+a+" .zoomSlider { left: 3px; height: 225px; margin: 11px 0 } </style>");
var b=this.config.zoomSlider;jQuery("#"+a+" .zoomInButton").button({icons:{primary:"ui-icon-plus"},text:n}).bind("click",{context:this},function(a){a=a.data.context;a.P(Math.min(b.max,a.ea()+b.step))});jQuery("#"+a+" .zoomOutButton").button({icons:{primary:"ui-icon-minus"},text:n}).bind("click",{context:this},function(a){a=a.data.context;a.P(Math.max(b.min,a.ea()-b.step))});jQuery("#"+a+" .zoomSlider").slider(b).bind("slide",{context:this},function(a,b){a.data.context.P(b.value)});this.P(b.value)};
Constellation.prototype.initZoomControls=Constellation.prototype.Sa;Constellation.prototype.bb={id:"constellation",graphLoaderClass:SimpleGraphLoader,graphLoader:{},graphParserClass:GraphMlParser,graphParser:{},graphViewClass:TreeGraphView,graphView:{},layoutClass:RoamerLayout,layout:{},zoomSlider:{orientation:"vertical",min:0.2,max:2,value:1,step:0.05}};Constellation.prototype.v=[["node",{rendererClass:DefaultNodeRenderer}],["edge",{rendererClass:DefaultEdgeRenderer}]];
Constellation.prototype.lb=q("Y");Constellation.prototype.getModel=Constellation.prototype.lb;Constellation.prototype.$a=function(a){this.debug("Set model:",a);this.Y=a;this.t&&this.t.setGraph(this.Y);this.n&&this.n.setSource(this.Y);this.Ca()};Constellation.prototype.setModel=Constellation.prototype.$a;Constellation.prototype.jb=q("n");Constellation.prototype.getGraphView=Constellation.prototype.jb;
Constellation.prototype.Ya=function(a){this.debug("Set graph view:",a);this.n&&(this.n.setConstellation(l),this.n.setSource(l),this.n.setResult(l),jQuery(this.n).unbind("change"));if(this.n=a)this.n.setConstellation(this),this.n.setSource(this.Y),this.n.setResult(this),jQuery(this.n).bind("change",{context:this},function(a){a.data.context.I()})};Constellation.prototype.setGraphView=Constellation.prototype.Ya;Constellation.prototype.hb=q("s");Constellation.prototype.getGraphLoader=Constellation.prototype.hb;
Constellation.prototype.Wa=function(a){this.debug("Set graph loader:",a);this.s&&(this.s.setConstellation(l),this.s.setParser(l));if(this.s=a)this.s.setConstellation(this),this.s.setParser(this.t)};Constellation.prototype.setGraphLoader=Constellation.prototype.Wa;Constellation.prototype.ib=q("t");Constellation.prototype.getGraphParser=Constellation.prototype.ib;
Constellation.prototype.Xa=function(a){this.debug("Set graph parser:",a);this.t&&(this.s&&this.s.setParser(l),this.t.setGraph(l),jQuery(this.t).unbind("complete"));if(this.t=a)this.s&&this.s.setParser(this.t),this.t.setGraph(this.Y),jQuery(this.t).bind("complete",{context:this},function(a){a.data.context.Ca()})};Constellation.prototype.setGraphParser=Constellation.prototype.Xa;Constellation.prototype.kb=q("G");Constellation.prototype.getLayout=Constellation.prototype.kb;
Constellation.prototype.Za=function(a){this.debug("Set layout:",a);this.G&&(this.G.setConstellation(l),jQuery(this.G).unbind("change"));if(this.G=a)this.G.setConstellation(this),jQuery(this.G).bind("change",{context:this},function(a){a.data.context.Ta()})};Constellation.prototype.setLayout=Constellation.prototype.Za;Constellation.prototype.da=q("Ua");Constellation.prototype.getNodeContainer=Constellation.prototype.da;Constellation.prototype.va=q("eb");Constellation.prototype.getEdgeContainer=Constellation.prototype.va;
Constellation.prototype.Pa=q("H");Constellation.prototype.getSelectedNodeId=Constellation.prototype.Pa;Constellation.prototype.yb=function(a){this.debug("Set selected node ID:",a);this.$&&(this.$=l,jQuery(this).trigger("edgeSelected"));this.H!=a&&(this.H=a,jQuery(this).trigger("nodeSelected"))};Constellation.prototype.setSelectedNodeId=Constellation.prototype.yb;Constellation.prototype.qb=q("$");Constellation.prototype.getSelectedEdgeId=Constellation.prototype.qb;
Constellation.prototype.xb=function(a){this.H&&(this.H=l,jQuery(this).trigger("nodeSelected"));this.$!=a&&(this.$=a,jQuery(this).trigger("edgeSelected"))};Constellation.prototype.setSelectedEdgeId=Constellation.prototype.xb;Constellation.prototype.Oa=function(){return this.Ua.getBBox()};Constellation.prototype.getRendererBounds=Constellation.prototype.Oa;
Constellation.prototype.F=function(a,b){this.debug("Add node:",a);this.j(a)&&h("Failed to add node. Node already exists.");var c=new (this.e("node",b?b.classes:[],"rendererClass",b,{rendererClass:DefaultNodeRenderer}))(this,a,b);c.create();c.draw();this.f.push(c);jQuery(this).trigger("nodeAdded",c);return c};Constellation.prototype.addNode=Constellation.prototype.F;Constellation.prototype.j=function(a){for(var b=0;b<this.f.length;b++)if(this.f[b].id==a)return this.f[b];return l};
Constellation.prototype.getNode=Constellation.prototype.j;Constellation.prototype.K=function(){return this.f.concat()};Constellation.prototype.getNodes=Constellation.prototype.K;Constellation.prototype.X=function(){return this.f.map(function(a){return a.id})};Constellation.prototype.getNodeIds=Constellation.prototype.X;Constellation.prototype.ya=function(){return this.f.length};Constellation.prototype.getNodeLength=Constellation.prototype.ya;
Constellation.prototype.removeNode=function(a){this.debug("Remove node:",a);for(var b=0;b<this.f.length;b++){var c=this.f[b];if(c.id==a){c.destroy(c);this.f.splice(b,1);jQuery(this).trigger("nodeRemoved",c);return}}h("Failed to remove node. Node does not exist.")};Constellation.prototype.removeNode=Constellation.prototype.removeNode;Constellation.prototype.Ha=function(a,b){var c=this.j(a);c?c.data=b:h("Failed to update node. Node does not exist.");return c};Constellation.prototype.updateNode=Constellation.prototype.Ha;
Constellation.prototype.Ja=function(a,b,c,d){var c=2<arguments.length?c:n,d=3<arguments.length?d:n,e=this.j(a);e?e.data=c?jQuery.extend(d,e.data,b):b:e=this.F(a,b);return e};Constellation.prototype.upsertNode=Constellation.prototype.Ja;
Constellation.prototype.D=function(a,b,c,d){this.debug("Add edge:",a);this.q(a)&&h("Failed to add edge. Edge already exists.");(b=this.j(b))||h("Failed to add edge. Tail node does not exist.");(c=this.j(c))||h("Failed to add edge. Head node does not exist.");a=new (this.e("edge",d?d.classes:[],"rendererClass",d,{rendererClass:DefaultNodeRenderer}))(this,a,b,c,d);a.create();a.draw();this.d.push(a);b.edges.push(a);c.edges.push(a);jQuery(this).trigger("edgeAdded",a);return a};
Constellation.prototype.addEdge=Constellation.prototype.D;Constellation.prototype.q=function(a){for(var b=0;b<this.d.length;b++)if(this.d[b].id==a)return this.d[b];return l};Constellation.prototype.getEdge=Constellation.prototype.q;Constellation.prototype.W=function(){return this.d.map(function(a){return a.id})};Constellation.prototype.getEdgeIds=Constellation.prototype.W;Constellation.prototype.ca=function(){return this.d.concat()};Constellation.prototype.getEdges=Constellation.prototype.ca;
Constellation.prototype.wa=function(){return this.d.length};Constellation.prototype.getEdgeLength=Constellation.prototype.wa;
Constellation.prototype.Z=function(a){this.debug("Remove edge:",a);var b,c=l;for(b=0;b<this.d.length;b++)if(this.d[b].id==a){c=this.d[b];c.destroy();this.d.splice(b,1);break}if(c){for(b=0;b<c.tailNode.edges.length;b++)if(c.tailNode.edges[b].id==a){c.tailNode.edges.splice(b,1);break}for(b=0;b<c.headNode.edges.length;b++)if(c.headNode.edges[b].id==a){c.headNode.edges.splice(b,1);break}jQuery(this).trigger("edgeRemoved",c)}else h("Failed to remove edge. Edge does not exist.")};
Constellation.prototype.removeEdge=Constellation.prototype.Z;Constellation.prototype.Ga=function(a,b){var c=this.q(a);c?c.data=b:h("Failed to update edge. Edge does not exist.");return c};Constellation.prototype.updateEdge=Constellation.prototype.Ga;Constellation.prototype.Ia=function(a,b,c,d,e,f){var e=4<arguments.length?e:n,f=5<arguments.length?f:n,g=this.q(a);g?g.data=e?jQuery.extend(f,g.data,d):d:g=this.D(a,b,c,d);return g};Constellation.prototype.upsertEdge=Constellation.prototype.Ia;
Constellation.prototype.Ca=function(){this.debug("Model changed");this.n&&this.n.ab()};Constellation.prototype.modelChanged=Constellation.prototype.Ca;Constellation.prototype.I=function(){this.debug("View changed");this.G&&this.G.I()};Constellation.prototype.viewChanged=Constellation.prototype.I;Constellation.prototype.Ta=function(){this.m()};Constellation.prototype.layoutChanged=Constellation.prototype.Ta;
Constellation.prototype.m=function(){var a;w(this);var b=this.f;for(a=0;a<b.length;a++)b[a].position();b=this.d;for(a=0;a<b.length;a++)b[a].draw()};function w(a){a.U=a.J.width();a.R=a.J.height();y(a)}function y(a){jQuery("#"+a.config.id+" .zoomSlider").val(a.l);jQuery(a.La).attr("transform","translate("+(a.U/2-a.B)+","+(a.R/2-a.C)+")scale("+a.l+","+a.l+")")}Constellation.prototype.ea=q("l");Constellation.prototype.getZoomScale=Constellation.prototype.ea;
Constellation.prototype.P=function(a){this.l=a;y(this)};Constellation.prototype.setZoomScale=Constellation.prototype.P;Constellation.prototype.S=function(a,b){return(a-this.U/2+this.B)/this.l*Math.cos(-this.rotation)-(b-this.R/2+this.C)/this.l*Math.sin(-this.rotation)};Constellation.prototype.viewportToWorldX=Constellation.prototype.S;Constellation.prototype.T=function(a,b){return(a-this.U/2+this.B)/this.l*Math.sin(-this.rotation)+(b-this.R/2+this.C)/this.l*Math.cos(-this.rotation)};
Constellation.prototype.viewportToWorldY=Constellation.prototype.T;Constellation.prototype.na=function(a,b){return(a*Math.cos(this.rotation)-b*Math.sin(this.rotation))*this.l+this.U/2-this.B};Constellation.prototype.worldToViewportX=Constellation.prototype.na;Constellation.prototype.oa=function(a,b){return(a*Math.sin(this.rotation)+b*Math.cos(this.rotation))*this.l+this.R/2-this.C};Constellation.prototype.worldToViewportY=Constellation.prototype.oa;Constellation.prototype.z=function(a){return a-this.J.offset().left};
Constellation.prototype.pageToViewportX=Constellation.prototype.z;Constellation.prototype.A=function(a,b){return b-this.J.offset().top};Constellation.prototype.pageToViewportY=Constellation.prototype.A;Constellation.prototype.ka=function(a,b){jQuery(this).trigger("nodemouseover",b.id)};Constellation.prototype.nodemouseoverHandler=Constellation.prototype.ka;Constellation.prototype.ja=function(a,b){jQuery(this).trigger("nodemouseout",b.id)};Constellation.prototype.nodemouseoutHandler=Constellation.prototype.ja;
Constellation.prototype.O=function(a,b){var c=this.k._mouse={Aa:n,M:b,i:a,timestamp:(new Date).getTime()},d=this.z(a.pageX),e=this.A(0,a.pageY);c.ga=this.S(d,e)-b.x;c.ha=this.T(d,e)-b.y;jQuery(this).trigger("nodemousedown",b.id)};Constellation.prototype.nodemousedownHandler=Constellation.prototype.O;Constellation.prototype.la=function(a,b){jQuery(this).trigger("nodemouseup",b.id)};Constellation.prototype.nodemouseupHandler=Constellation.prototype.la;
Constellation.prototype.ia=function(a,b){jQuery(this).trigger("nodeclick",b.id)};Constellation.prototype.nodeclickHandler=Constellation.prototype.ia;Constellation.prototype.ta=function(a,b){jQuery(this).trigger("edgemouseover",b.id)};Constellation.prototype.edgemouseoverHandler=Constellation.prototype.ta;Constellation.prototype.sa=function(a,b){jQuery(this).trigger("edgemouseout",b.id)};Constellation.prototype.edgemouseoutHandler=Constellation.prototype.sa;
Constellation.prototype.ra=function(a,b){this.k._mouse={cb:b,Aa:n,i:a,timestamp:(new Date).getTime()};jQuery(this).trigger("edgemousedown",b.id)};Constellation.prototype.edgemousedownHandler=Constellation.prototype.ra;Constellation.prototype.ua=function(a,b){jQuery(this).trigger("edgemouseup",b.id)};Constellation.prototype.edgemouseupHandler=Constellation.prototype.ua;
Constellation.prototype.qa=function(a,b){var c=this.k._mouse;c&&300>(new Date).getTime()-c.timestamp&&jQuery(this).trigger("edgeclick",b.id)};Constellation.prototype.edgeclickHandler=Constellation.prototype.qa;Constellation.prototype.Da=function(a){var b=this.k._mouse;b&&(b.i=a);b&&300>(new Date).getTime()-b.timestamp&&jQuery(this).trigger("backgroundclick");z(this);delete this.k._mouse;this.c==b&&(this.c=this.p);this.p==b&&(this.p=l);jQuery(this).trigger("mouseup")};
function z(a){var b=a.c,c=a.p;if(b){if(c){var d=a.na(c.x,c.y)-a.na(b.x,b.y),e=a.oa(c.x,c.y)-a.oa(b.x,b.y),f=Math.sqrt(d*d+e*e),g=a.z(c.i.pageX)-a.z(b.i.pageX),i=a.A(0,c.i.pageY)-a.A(0,b.i.pageY),c=Math.sqrt(g*g+i*i),d=Math.atan2(i,g)-Math.atan2(e,d);d>Math.PI&&(d-=2*Math.PI);d<-Math.PI&&(d=2*Math.PI+d);a.l=a.l*c/f;a.rotation+=d}a.B=a.B+a.na(b.x,b.y)-a.z(b.i.pageX);a.C=a.C+a.oa(b.x,b.y)-a.A(0,b.i.pageY);y(a)}}
Constellation.prototype.fb=function(){var a=[],b;for(b in this.k){var c=this.k[b];c.M&&a.push({node:c.M,nodeOffsetX:c.ga,nodeOffsetY:c.ha,pageX:c.i.pageX,pageY:c.i.pageY})}return a};Constellation.prototype.getDraggingNodeMetadata=Constellation.prototype.fb;
Constellation.prototype.e=function(a,b,c,d,e){var f,g;if(d&&void 0!==d[c])return d[c];if(b&&0<b.length)for(d=this.ma.length;0<d;d--){g=this.ma[d-1];f=g[0];var i=jQuery.inArray(".",f),j=0>i?f:f.substr(0,i);if(!(""!=j&&j!=a)){i=0>i?[]:f.substr(i+1).split(".");j=k;for(f=0;f<i.length;f++)if(0>jQuery.inArray(i[f],b)){j=n;break}if(j&&void 0!==g[1][c])return g[1][c]}}for(d=this.ma.length;0<d;d--)if((g=this.ma[d-1])&&1<g.length&&g[0]==a&&void 0!==g[1][c])return g[1][c];return e?e[c]:void 0};
Constellation.prototype.getStyle=Constellation.prototype.e;Constellation.prototype.debug=function(a){jQuery(this).trigger("log",["debug"].concat(Array.prototype.slice.call(arguments)))};Constellation.prototype.debug=Constellation.prototype.debug;Constellation.prototype.warn=function(a){jQuery(this).trigger("log",["warn"].concat(Array.prototype.slice.call(arguments)))};Constellation.prototype.warn=Constellation.prototype.warn;Constellation.prototype.error=function(a){jQuery(this).trigger("log",["error"].concat(Array.prototype.slice.call(arguments)))};
Constellation.prototype.error=Constellation.prototype.error;
